<ion-header>
  <ion-toolbar color="primary">
    <ion-title>UniMap</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <div slot="fixed" class="search-host">

    <!-- Search ÏŒÏ„Î±Î½ Î”Î•Î Î­Ï‡Î¿Ï…Î¼Îµ nav -->
    <ng-container *ngIf="!navEnabled; else navBox">
      <app-search-bar
        (destinationSelected)="onDestinationSelected($event)"
        (searchOpenChange)="onSearchOpenChange($event)">
      </app-search-bar>
    </ng-container>

    <!-- Nav box ÏŒÏ„Î±Î½ navEnabled = true -->
    <ng-template #navBox>
      <div class="nav-box" [ngClass]="navTheme">
        <div class="nav-top">Î Î›ÎŸÎ—Î“Î—Î£Î—</div>

        <div class="nav-body">
          <div class="nav-icon">{{ navIcon }}</div>
          <div>
            <div class="nav-text">{{ navInstruction }}</div>
            <div class="nav-sub" *ngIf="navSub">{{ navSub }}</div>
          </div>
        </div>
      </div>
    </ng-template>

  </div>

  <!-- ðŸ—ºï¸ Map -->
  <div id="map"></div>

  <!-- ðŸ”’ Lock overlay -->
  <div *ngIf="showLockOverlay" class="lock-screen">
    <div class="lock-card">Î•ÎºÏ„ÏŒÏ‚ ÎµÎ¼Î²Î­Î»ÎµÎ¹Î±Ï‚</div>
  </div>

  <!-- ðŸ“Œ Popup -->
  <app-department-popup
    *ngIf="showModal && currentDestination"
    class="popup-overlay"
    [destination]="currentDestination"
    [routeReady]="routeReady"
    [navigationActive]="navigationActive"
    [hasArrived]="hasArrived"
    (navigate)="startNavigation()"
    (cancel)="cancelNavigation()"
    (close)="onPopupClose()">
  </app-department-popup>

</ion-content>
