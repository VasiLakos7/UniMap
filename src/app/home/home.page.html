<ion-header>
  <ion-toolbar color="primary">
    <ion-title>UniMap</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <div slot="fixed" class="search-host">
    <ng-container *ngIf="!navEnabled; else navBox">
      <app-search-bar
        [locked]="selectionLocked"
        [placeholderText]="selectionLocked ? 'ðŸ”’ Î”Î¹Î±Î´ÏÎ¿Î¼Î® ÎµÎ½ÎµÏÎ³Î® â€” Ï€Î¬Ï„Î± Î§ ÏƒÏ„Î¿ popup' : 'Î ÏÎ¿Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚...'"
        (destinationSelected)="onDestinationSelected($event)"
        (searchOpenChange)="onSearchOpenChange($event)"
        (lockedAttempt)="onSearchLockedAttempt()">
      </app-search-bar>
    </ng-container>

    <ng-template #navBox>
      <div class="nav-box" [ngClass]="navTheme">
        <div class="nav-top">Î Î›ÎŸÎ—Î“Î—Î£Î—</div>
        <div class="nav-body">
          <div class="nav-icon">
            <ion-icon [name]="navIcon"></ion-icon>
          </div>
          <div class="nav-text">{{ navInstruction }}</div>
        </div>
      </div>
    </ng-template>
  </div>

  <div id="map"></div>

  <div *ngIf="showLockOverlay" class="lock-screen">
    <div class="lock-card">Î•ÎºÏ„ÏŒÏ‚ ÎµÎ¼Î²Î­Î»ÎµÎ¹Î±Ï‚</div>
  </div>

  <!-- Î‘ÎœÎ•Î‘: ÎºÎ­Î½Ï„ÏÎ¿ Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬ -->
  <ion-fab slot="fixed" vertical="center" horizontal="start" class="amea-fab">
    <ion-fab-button (click)="onAmeaClick()" aria-label="Î ÏÎ¿ÏƒÎ²Î±ÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±" class="amea-btn">
      <span class="amea-mask"></span>
    </ion-fab-button>
  </ion-fab>

  <div slot="fixed" class="popup-overlay">
    <app-department-popup
      *ngIf="showModal && currentDestination"
      [destination]="currentDestination"
      [routeReady]="routeReady"
      [navigationActive]="navigationActive"
      [hasArrived]="hasArrived"
      [meters]="popupMeters"
      [etaMin]="popupEtaMin"
      (navigate)="startNavigation()"
      (cancel)="cancelRouteKeepPopup()"
      (close)="onPopupClose()">
    </app-department-popup>
  </div>


</ion-content>
