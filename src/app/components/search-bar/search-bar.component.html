<div class="search-float" [class.locked]="showLockBadge">
  <ion-searchbar
    [disabled]="locked"
    [placeholder]="placeholderText"
    [(ngModel)]="searchQuery"
    (ionInput)="onSearchInput()"
    (ionFocus)="onSearchFocus()"
    showClearButton="focus">
  </ion-searchbar>

  <!-- âœ… PILL -->
  <div *ngIf="showLockBadge" class="lock-pill" (click)="$event.stopPropagation()">
    <span class="lock-pill-text">{{ lockBadgeText }}</span>
    <ion-button
      fill="clear"
      size="small"
      color="medium"
      class="lock-pill-btn"
      (click)="onCancelClick($event)">
      {{ 'SEARCH.CANCEL' | translate }}
    </ion-button>
  </div>

  <div
    *ngIf="panelOpen && (filteredResults.length || (!searchQuery.trim() && recentResults.length))"
    class="divider">
  </div>

  <!-- RESULTS -->
  <ion-list *ngIf="panelOpen && searchQuery.trim() && filteredResults.length" class="results">
    <ion-item
      button
      lines="none"
      *ngFor="let dest of filteredResults"
      (click)="selectDestination(dest)">
      {{ ('DEST.' + dest.id + '.NAME') | translate }}
    </ion-item>
  </ion-list>

  <!-- RECENTS -->
  <ion-list *ngIf="panelOpen && !searchQuery.trim() && recentResults.length" class="results recents">
    <ion-item lines="none" class="recent-header">
      <ion-label>{{ 'SEARCH.RECENT_SHORT' | translate }}</ion-label>

      <ion-button
        fill="clear"
        size="small"
        color="medium"
        slot="end"
        (click)="clearRecents()">
        {{ 'SEARCH.CLEAR_ALL' | translate }}
      </ion-button>
    </ion-item>

    <ion-item
      button
      lines="none"
      class="recent-item"
      *ngFor="let dest of recentResults"
      (click)="selectDestination(dest)">
      {{ ('DEST.' + dest.id + '.NAME') | translate }}
    </ion-item>
  </ion-list>
</div>
